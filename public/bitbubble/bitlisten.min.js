window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,d){window.setTimeout(a,1E3/60)}}());
(function(){window.visibly={b:null,q:document,p:void 0,prefixes:["webkit","ms"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],_callbacks:[],onVisible:function(a){this.visibleCallbacks.push(a)},onHidden:function(a){this.hiddenCallbacks.push(a)},isSupported:function(){return this._supports(0)||this._supports(1)},_supports:function(a){return this.prefixes[a]+this.props[2]in this.q},runCallbacks:function(a){if(a)for(this._callbacks=1==
a?this.visibleCallbacks:this.hiddenCallbacks,a=0;a<this._callbacks.length;a++)this._callbacks[a]()},_visible:function(){window.visibly.runCallbacks(1)},_hidden:function(){window.visibly.runCallbacks(2)},_nativeSwitch:function(){!0===this.q[this.b+this.props[2]]?this._hidden():this._visible()},listen:function(){try{this.isSupported()?(this.b=this._supports(0)==this.p?this.prefixes[1]:this.prefixes[0],this.q.addEventListener(this.b+this.props[1],function(){window.visibly._nativeSwitch.apply(window.visibly,
arguments)},1)):document.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(a){}},init:function(){this.listen()}};this.visibly.init()})();(function(a){a.fn.qr=function(d){function f(d,f){for(var l=escape(d);-1!=l.indexOf("/");)l=l.replace("/","%2f");var z=document.createElement("div");$qr=a(z);$qr.css({background:"url('http://chart.apis.google.com/chart?cht=qr&chs="+f+"x"+f+"&chl="+l+"') no-repeat",width:f+"px",height:f+"px",display:"none","border-style":"solid","border-width":"1px",position:"absolute","z-index":"1000"});a("body").append($qr);return z}return this.each(function(){var k={size:"230",delay:"0"};d&&a.extend(k,d);var g=a(this);
g.qr_div=f(g.attr("qrtarget"),k.size);g.mouseenter(function(d){g.qr_timeout_id=window.setTimeout(function(){a(g.qr_div).css({display:"block",top:d.pageY+5,left:d.pageX+15})},k.delay)});g.mouseleave(function(d){null!=g.qr_timeout_id&&(window.clearTimeout(g.qr_timeout_id),g.qr_timeout_id=null);a(g.qr_div).css({display:"none"})})})}})(jQuery);var Konami=function(a){var d={addEvent:function(a,d,g,l){a.addEventListener?a.addEventListener(d,g,!1):a.attachEvent&&(a["e"+d+g]=g,a[d+g]=function(){a["e"+d+g](window.event,l)},a.attachEvent("on"+d,a[d+g]))},input:"",pattern:"38384040373937396665",load:function(a){this.addEvent(document,"keydown",function(k,g){g&&(d=g);d.input+=k?k.keyCode:event.keyCode;d.input.length>d.pattern.length&&(d.input=d.input.substr(d.input.length-d.pattern.length));if(d.input==d.pattern)return d.code(a),d.input="",k.preventDefault(),
!1},this);this.iphone.load(a)},code:function(a){window.location=a},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:"UP UP DOWN DOWN LEFT RIGHT LEFT RIGHT TAP TAP".split(" "),code:function(a){d.code(a)},load:function(a){this.orig_keys=this.keys;d.addEvent(document,"touchmove",function(a){1==a.touches.length&&1==d.iphone.capture&&(a=a.touches[0],d.iphone.stop_x=a.pageX,d.iphone.stop_y=a.pageY,d.iphone.tap=!1,d.iphone.capture=!1,d.iphone.check_direction())});d.addEvent(document,
"touchend",function(k){1==d.iphone.tap&&d.iphone.check_direction(a)},!1);d.addEvent(document,"touchstart",function(a){d.iphone.start_x=a.changedTouches[0].pageX;d.iphone.start_y=a.changedTouches[0].pageY;d.iphone.tap=!0;d.iphone.capture=!0})},check_direction:function(a){x_magnitude=Math.abs(this.start_x-this.stop_x);y_magnitude=Math.abs(this.start_y-this.stop_y);x=0>this.start_x-this.stop_x?"RIGHT":"LEFT";y=0>this.start_y-this.stop_y?"DOWN":"UP";result=x_magnitude>y_magnitude?x:y;result=1==this.tap?
"TAP":result;result==this.keys[0]&&(this.keys=this.keys.slice(1,this.keys.length));0==this.keys.length&&(this.keys=this.orig_keys,this.code(a))}}};"string"===typeof a&&d.load(a);"function"===typeof a&&(d.code=a,d.load());return d};(function(a,d){"function"===typeof define&&define.amd?define([],d):"undefined"!==typeof module&&module.exports?module.exports=d():a.ReconnectingWebSocket=d()})(this,function(){function a(d,f){function k(v){l=new WebSocket(d,f);g.onconnecting();(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",d);var B=l,q=setTimeout(function(){(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",d);u=!0;B.close();u=!1},g.timeoutInterval);l.onopen=function(f){clearTimeout(q);
(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onopen",d);g.readyState=WebSocket.OPEN;v=!1;g.reconnectAttempts=0;g.onopen(f)};l.onclose=function(f){clearTimeout(q);l=null;z?(g.readyState=WebSocket.CLOSED,g.onclose(f)):(g.readyState=WebSocket.CONNECTING,g.onconnecting(),v||u||((g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onclose",d),g.onclose(f)),setTimeout(function(){g.reconnectAttempts++;k(!0)},g.reconnectInterval*Math.pow(g.reconnectDecay,g.reconnectAttempts)))};
l.onmessage=function(f){(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",d,f.data);g.onmessage(f)};l.onerror=function(f){(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onerror",d,f);g.onerror(f)}}f=f||[];this.debug=!1;this.reconnectInterval=1E3;this.reconnectDecay=1.5;this.reconnectAttempts=0;this.timeoutInterval=2E3;var g=this,l,z=!1,u=!1;this.url=d;this.protocols=f;this.readyState=WebSocket.CONNECTING;this.URL=d;this.onopen=function(a){};this.onclose=function(a){};
this.onconnecting=function(a){};this.onmessage=function(a){};this.onerror=function(a){};k(!1);this.send=function(f){if(l)return(g.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","send",d,f),l.send(f);throw"INVALID_STATE_ERR : Pausing to reconnect websocket";};this.close=function(){z=!0;l&&l.close()};this.refresh=function(){l&&l.close()}}a.debugAll=!1;return a});(function(a){function d(a){throw new RangeError("noUiSlider: "+a);}function f(a,e,b){(a[e]||a[b])&&a[e]===a[b]&&d("(Link) '"+e+"' can't match '"+b+"'.'")}function k(a){return Math.max(Math.min(a,100),0)}function g(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}function l(e){return a.isArray(e)?e:[e]}function z(a,e,b){a.addClass(e);setTimeout(function(){a.removeClass(e)},b)}function u(a,e){return 100*e/(a[1]-a[0])}function v(a,e){if(e>=a.xVal.slice(-1)[0])return 100;for(var b=1,c,d,h;e>=a.xVal[b];)b++;
c=a.xVal[b-1];d=a.xVal[b];h=a.xPct[b-1];b=a.xPct[b];c=[c,d];c=u(c,0>c[0]?e+Math.abs(c[0]):e-c[0]);return h+c/(100/(b-h))}function B(a,e){for(var b=1,c;e>=a.xPct[b];)b++;if(a.snap)return c=a.xPct[b-1],b=a.xPct[b],e-c>(b-c)/2?b:c;if(!a.xSteps[b-1])return e;c=a.xPct[b-1];var d=a.xSteps[b-1],b=Math.round((e-a.xPct[b-1])/d)*d;return c+b}function q(e){void 0===e&&(e={});"object"!==typeof e&&d("(Format) 'format' option must be an object.");var b={};a(O).each(function(a,c){void 0===e[c]?b[c]=H[a]:typeof e[c]===
typeof H[a]?("decimals"===c&&(0>e[c]||7<e[c])&&d("(Format) 'format.decimals' option must be between 0 and 7."),b[c]=e[c]):d("(Format) 'format."+c+"' must be a "+typeof H[a]+".")});f(b,"mark","thousand");f(b,"prefix","negative");f(b,"prefix","negativeBefore");this.settings=b}function n(e,b){if(!(this instanceof n))throw Error("Link: Don't use Link as a function. Use the 'new' keyword.");if(!e)throw new RangeError("Link: missing parameters.");this.formatting=e.format||{};this.update=!b;var c=this,d=
e.target||function(){},h=e.method,f="string"===typeof d&&0===d.indexOf("-tooltip-"),g="string"===typeof d&&0!==d.indexOf("-"),E="function"===typeof d,m=d instanceof a||a.zepto&&a.zepto.isZ(d),k=m&&d.is("input, select, textarea"),p=m&&"function"===typeof h,l=m&&"string"===typeof h&&d[h];if(f)this.method=h||"html",this.el=a(d.replace("-tooltip-","")||"<div/>")[0];else if(g)this.method="val",this.el=document.createElement("input"),this.el.name=d,this.el.type="hidden";else if(E)this.target=!1,this.method=
d;else{if(m){if(h&&(p||l)){this.target=d;this.method=h;return}if(!h&&k){this.method="val";this.target=d;this.target.on("change",function(e){e=a(e.target).val();var b=c.N;c.obj.val([b?null:e,b?e:null],{link:c})});return}if(!h&&!k){this.method="html";this.target=d;return}}throw new RangeError("Link: Invalid Link.");}}function I(a,e){g(e)||d("'step' is not numeric.");a.xSteps[0]=e}function F(e,b){("object"!==typeof b||a.isArray(b))&&d("'range' is not an object.");a.each(b,function(b,c){var C;"number"===
typeof c&&(c=[c]);a.isArray(c)||d("'range' contains invalid value.");C="min"===b?0:"max"===b?100:parseFloat(b);g(C)&&g(c[0])||d("'range' value isn't numeric.");e.xPct.push(C);e.xVal.push(c[0]);C?e.xSteps.push(isNaN(c[1])?!1:c[1]):isNaN(c[1])||(e.xSteps[0]=c[1])});a.each(e.xSteps,function(a,b){if(!b)return!0;e.xSteps[a]=u([e.xVal[a],e.xVal[a+1]],b)/(100/(e.xPct[a+1]-e.xPct[a]))})}function G(e,b){"number"===typeof b&&(b=[b]);(!a.isArray(b)||!b.length||2<b.length)&&d("'start' option is incorrect.");
e.handles=b.length;e.start=b}function J(a,e){a.snap=e;"boolean"!==typeof e&&d("'snap' option must be a boolean.")}function e(a,e){"lower"===e&&1===a.handles?a.connect=1:"upper"===e&&1===a.handles?a.connect=2:!0===e&&2===a.handles?a.connect=3:!1===e?a.connect=0:d("'connect' option was doesn't match handle count.")}function b(a,e){switch(e){case "horizontal":a.ort=0;break;case "vertical":a.ort=1;break;default:d("'orientation' option is invalid.")}}function c(a,e){2<a.xPct.length&&d("'margin' option is only supported on linear sliders.");
a.margin=u(a.xVal,e);g(e)||d("'margin' option must be numeric.")}function h(a,e){switch(e){case "ltr":a.dir=0;break;case "rtl":a.dir=1;a.connect=[0,2,1,3][a.connect];break;default:d("'direction' option was not recognized.")}}function E(a,e){"string"!==typeof e&&d("'behaviour' must be a string containing options.");var b=0<=e.indexOf("tap"),c=0<=e.indexOf("extend"),h=0<=e.indexOf("drag"),f=0<=e.indexOf("fixed"),g=0<=e.indexOf("snap");a.events={tap:b||g,extend:c,drag:h,fixed:f,snap:g}}function m(e,
b,c){e.ser=[b.lower,b.upper];e.formatting=new q(b.format);a.each(e.ser,function(e,h){a.isArray(h)||d("'serialization."+(e?"upper":"lower")+"' must be an array.");a.each(h,function(){this instanceof n||d("'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.N=e;this.obj=c;this.scope=this.scope||c;this.formatting=new q(a.extend({},b.format,this.formatting))})});e.dir&&1<e.handles&&e.ser.reverse()}function K(r,C){var f={xPct:[],xVal:[],xSteps:[!1],margin:0},g;g={step:{r:!1,
t:I},range:{r:!0,t:F},start:{r:!0,t:G},snap:{r:!1,t:J},connect:{r:!0,t:e},orientation:{r:!1,t:b},margin:{r:!1,t:c},direction:{r:!0,t:h},behaviour:{r:!0,t:E},serialization:{r:!0,t:m}};r=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},r);r.serialization=a.extend({lower:[],upper:[],format:{}},r.serialization);a.each(g,function(a,e){if(void 0===r[a])if(e.r)d("'"+a+"' is required.");else return!0;e.t(f,r[a],C)});f.style=f.ort?"top":"left";return f}function L(e,b){var c=a("<div><div/></div>").addClass(p[2]),
d=["-lower","-upper"];e.dir&&d.reverse();c.children().addClass(p[3]+" "+p[3]+d[b]);return c}function A(e,b){b.el&&(b=new n({target:a(b.el).clone().appendTo(e),method:b.method,format:b.formatting},!0));return b}function P(a,e){var b,c=[];for(b=0;b<a.handles;b++){var d=b,h=a.ser[b],f=e[b].children(),g=void 0,m=[];m.push(new n({format:a.formatting},!0));for(g=0;g<h.length;g++)m.push(A(f,h[g]));c[d]=m}return c}function Q(a,e,b){switch(a){case 1:e.addClass(p[7]);b[0].addClass(p[6]);break;case 3:b[1].addClass(p[6]);
case 2:b[0].addClass(p[7]);case 0:e.addClass(p[6])}}function R(a,e){var b,c=[];for(b=0;b<a.handles;b++)c.push(L(a,b).appendTo(e));return c}function S(e,b){b.addClass([p[0],p[8+e.dir],p[4+e.ort]].join(" "));return a("<div/>").appendTo(b).addClass(p[1])}function T(e,b,c){function d(){return u[["width","height"][b.ort]]()}function h(a){var e,b=[w.val()];for(e=0;e<a.length;e++)w.trigger(a[e],b)}function f(e,c,d){var h=e[0]!==t[0][0]?1:0,g=n[0]+b.margin,r=n[1]-b.margin;d&&1<t.length&&(c=h?Math.max(c,g):
Math.min(c,r));100>c&&(c=B(b,c));c=k(parseFloat(c.toFixed(7)));if(c===n[h])return 1===t.length?!1:c===g||c===r?0:!1;e.css(b.style,c+"%");e.is(":first-child")&&e.toggleClass(p[17],50<c);n[h]=c;b.dir&&(c=100-c);a(A[h]).each(function(){this.write(b,c,e.children(),w)});return!0}function g(a,e,b){b||z(w,p[14],300);f(a,e,!1);h(["slide","set","change"])}function m(a,e,c,d){a=a.replace(/\s/g,".nui ")+".nui";return e.on(a,function(a){var e=w.attr("disabled"),e=!(void 0===e||null===e);if(w.hasClass(p[14])||
e)return!1;a.preventDefault();var e=0===a.type.indexOf("touch"),h=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g,r,m=a;0===a.type.indexOf("MSPointer")&&(f=!0);a.originalEvent&&(a=a.originalEvent);e&&(g=a.changedTouches[0].pageX,r=a.changedTouches[0].pageY);if(h||f)f||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),g=a.clientX+window.pageXOffset,r=a.clientY+window.pageYOffset;m.points=[g,r];m.cursor=
h;a=m;a.calcPoint=a.points[b.ort];c(a,d)})}function E(a,e){var b=e.handles||t,c,g=!1,g=100*(a.calcPoint-e.start)/d(),r=b[0][0]!==t[0][0]?1:0;var m=e.positions;c=g+m[0];g+=m[1];1<b.length?(0>c&&(g+=Math.abs(c)),100<g&&(c-=g-100),c=[k(c),k(g)]):c=[c,g];g=f(b[0],c[r],1===b.length);1<b.length&&(g=f(b[1],c[r?0:1],!1)||g);g&&h(["slide"])}function l(e){a("."+p[15]).removeClass(p[15]);e.cursor&&a("body").css("cursor","").off(".nui");M.off(".nui");w.removeClass(p[12]);h(["set","change"])}function q(e,b){1===
b.handles.length&&b.handles[0].children().addClass(p[15]);e.stopPropagation();m(D.move,M,E,{start:e.calcPoint,handles:b.handles,positions:[n[0],n[t.length-1]]});m(D.end,M,l,null);e.cursor&&(a("body").css("cursor",a(e.target).css("cursor")),1<t.length&&w.addClass(p[12]),a("body").on("selectstart.nui",!1))}function L(e){var c=e.calcPoint,h=0;e.stopPropagation();a.each(t,function(){h+=this.offset()[b.style]});h=c<h/2||1===t.length?0:1;c-=u.offset()[b.style];c=100*c/d();g(t[h],c,b.events.snap);b.events.snap&&
q(e,{handles:[t[h]]})}function K(a){var e=(a=a.calcPoint<u.offset()[b.style])?0:100;a=a?0:t.length-1;g(t[a],e,!1)}var w=a(e),n=[-1,-1],u,A,t;if(!w.is(":empty"))throw Error("Slider was already initialized.");u=S(b,w);t=R(b,u);A=P(b,t);Q(b.connect,w,t);(function(a){var e;if(!a.fixed)for(e=0;e<t.length;e++)m(D.start,t[e].children(),q,{handles:[t[e]]});a.tap&&m(D.start,u,L,{handles:t});a.extend&&(w.addClass(p[16]),a.tap&&m(D.start,w,K,{handles:t}));a.drag&&(e=u.find("."+p[7]).addClass(p[10]),a.fixed&&
(e=e.add(u.children().not(e).children())),m(D.start,e,q,{handles:t}))})(b.events);e.vSet=function(e,c,d,g,r){var m;b.dir&&1<b.handles&&e.reverse();r&&z(w,p[14],300);for(m=0;m<(1<t.length?3:1);m++)r=d||A[m%2][0],r=r.valueOf(e[m%2]),!1!==r&&(r=v(b,r),b.dir&&(r=100-r),!0!==f(t[m%2],r,!0)&&a(A[m%2]).each(function(){this.write(b,n[m%2],t[m%2].children(),w,g)}));!0===c&&h(["set"]);return this};e.vGet=function(){var a,e=[];for(a=0;a<b.handles;a++)e[a]=A[a][0].saved;return 1===e.length?e[0]:b.dir&&1<b.handles?
e.reverse():e};e.destroy=function(){a.each(A,function(){a.each(this,function(){this.target&&this.target.off(".nui")})});a(this).off(".nui").removeClass(p.join(" ")).empty();return c};w.val(b.start)}function U(a){this.length||d("Can't initialize slider on empty selection.");var e=K(a,this);return this.each(function(){T(this,e,a)})}function V(e){return this.each(function(){var b=a(this).val(),c=this.destroy(),d=a.extend({},c,e);a(this).noUiSlider(d);c.start===d.start&&a(this).val(b)})}var M=a(document),
N=a.fn.val,D=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},p="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" "),
O="decimals mark thousand prefix postfix encoder decoder negative negativeBefore".split(" "),H=[2,".","","","",function(a){return a},function(a){return a},"-",""];q.prototype.v=function(a){return this.settings[a]};q.prototype.to=function(a){function e(a){return a.split("").reverse().join("")}a=this.v("encoder")(a);var b="",c="",d="",h="";0>a&&(b=this.v("negative"),c=this.v("negativeBefore"));a=Math.abs(a).toFixed(this.v("decimals")).toString();a=a.split(".");0===parseFloat(a)&&(a[0]="0");this.v("thousand")?
(d=e(a[0]).match(/.{1,3}/g),d=e(d.join(e(this.v("thousand"))))):d=a[0];this.v("mark")&&1<a.length&&(h=this.v("mark")+a[1]);return c+this.v("prefix")+b+d+h+this.v("postfix")};q.prototype.from=function(a){function e(a){return a.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var b;if(null===a||void 0===a)return!1;a=a.toString();b=a.replace(new RegExp("^"+e(this.v("negativeBefore"))),"");a!==b?(a=b,b="-"):b="";a=a.replace(new RegExp("^"+e(this.v("prefix"))),"");this.v.negative&&(b="",a=a.replace(new RegExp("^"+
e(this.v("negative"))),"-"));a=a.replace(new RegExp(e(this.v("postfix"))+"$"),"").replace(new RegExp(e(this.v("thousand")),"g"),"").replace(this.v("mark"),".");a=this.v("decoder")(parseFloat(b+a));return isNaN(a)?!1:a};n.prototype.write=function(a,e,b,c,d){if(!this.update||!1!==d){if(100<=e)e=a.xVal.slice(-1)[0];else{d=1;for(var h,g,f;e>=a.xPct[d];)d++;h=a.xVal[d-1];g=a.xVal[d];f=a.xPct[d-1];h=[h,g];e=100/(a.xPct[d]-f)*(e-f)*(h[1]-h[0])/100+h[0]}this.saved=e=this.format(e);if("function"===typeof this.method)this.method.call(this.target[0]||
c[0],e,b,c);else this.target[this.method](e,b,c)}};n.prototype.format=function(a){return this.formatting.to(a)};n.prototype.valueOf=function(a){return this.formatting.from(a)};a.noUiSlider={Link:n};a.fn.noUiSlider=function(a,e){return(e?V:U).call(this,a)};a.fn.val=function(){var e=Array.prototype.slice.call(arguments,0),b,c,d,h;if(!e.length)return this.hasClass(p[0])?this[0].vGet():N.apply(this);"object"===typeof e[1]?(b=e[1].set,c=e[1].link,d=e[1].update,h=e[1].animate):!0===e[1]&&(b=!0);return this.each(function(){a(this).hasClass(p[0])?
this.vSet(l(e[0]),b,c,d,h):N.apply(a(this),e)})}})(window.jQuery||window.Zepto);(function(){var a={},d=null,f=!0,k=!1;try{"undefined"!==typeof AudioContext?d=new AudioContext:"undefined"!==typeof webkitAudioContext?d=new webkitAudioContext:f=!1}catch(g){f=!1}if(!f)if("undefined"!==typeof Audio)try{new Audio}catch(l){k=!0}else k=!0;if(f){var z="undefined"===typeof d.createGain?d.createGainNode():d.createGain();z.gain.value=1;z.connect(d.destination)}var u=function(a){this._volume=1;this._muted=!1;this.usingWebAudio=f;this.ctx=d;this.noAudio=k;this._howls=[];this._codecs=a;this.iOSAutoEnable=
!0};u.prototype={volume:function(a){a=parseFloat(a);if(0<=a&&1>=a){this._volume=a;f&&(z.gain.value=a);for(var b in this._howls)if(this._howls.hasOwnProperty(b)&&!1===this._howls[b]._webAudio)for(a=0;a<this._howls[b]._audioNode.length;a++)this._howls[b]._audioNode[a].volume=this._howls[b]._volume*this._volume;return this}return f?z.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(a){this._muted=a;f&&(z.gain.value=
a?0:this._volume);for(var b in this._howls)if(this._howls.hasOwnProperty(b)&&!1===this._howls[b]._webAudio)for(var c=0;c<this._howls[b]._audioNode.length;c++)this._howls[b]._audioNode[c].muted=a},codecs:function(a){return this._codecs[a]},_enableiOSAudio:function(){var a=this;if(!d||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var b=function(){var c=d.createBuffer(1,1,22050),h=d.createBufferSource();h.buffer=c;h.connect(d.destination);"undefined"===typeof h.start?
h.noteOn(0):h.start(0);setTimeout(function(){if(h.playbackState===h.PLAYING_STATE||h.playbackState===h.FINISHED_STATE)a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",b,!1)},0)};window.addEventListener("touchstart",b,!1);return a}}};var v=null,B={};k||(v=new Audio,B={mp3:!!v.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!v.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!v.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!v.canPlayType('audio/wav; codecs="1"').replace(/^no$/,
""),aac:!!v.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(v.canPlayType("audio/x-m4a;")||v.canPlayType("audio/m4a;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(v.canPlayType("audio/x-mp4;")||v.canPlayType("audio/mp4;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!v.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var q=new u(B),n=function(a){this._autoplay=a.autoplay||!1;this._buffer=a.buffer||!1;this._duration=a.duration||0;this._format=a.format||null;
this._loop=a.loop||!1;this._loaded=!1;this._sprite=a.sprite||{};this._src=a.src||"";this._pos3d=a.pos3d||[0,0,-.5];this._volume=void 0!==a.volume?a.volume:1;this._urls=a.urls||[];this._rate=a.rate||1;this._model=a.model||null;this._onload=[a.onload||function(){}];this._onloaderror=[a.onloaderror||function(){}];this._onend=[a.onend||function(){}];this._onpause=[a.onpause||function(){}];this._onplay=[a.onplay||function(){}];this._onendTimer=[];this._webAudio=f&&!this._buffer;this._audioNode=[];this._webAudio&&
this._setupAudioNode();"undefined"!==typeof d&&d&&q.iOSAutoEnable&&q._enableiOSAudio();q._howls.push(this);this.load()};n.prototype={load:function(){var a=this,b=null;if(!k){for(var c=0;c<a._urls.length;c++){var d,g;if(a._format)d=a._format;else if(g=a._urls[c],(d=/^data:audio\/([^;,]+);/i.exec(g))||(d=/\.([^.]+)$/.exec(g.split("?",1)[0])),d)d=d[1].toLowerCase();else{a.on("loaderror");return}if(B[d]){b=a._urls[c];break}}if(b){a._src=b;if(a._webAudio)I(a,b);else{var f=new Audio;f.addEventListener("error",
function(){f.error&&4===f.error.code&&(u.noAudio=!0);a.on("loaderror",{type:f.error?f.error.code:0})},!1);a._audioNode.push(f);f.src=b;f._pos=0;f.preload="auto";f.volume=q._muted?0:a._volume*q.volume();var l=function(){a._duration=Math.ceil(10*f.duration)/10;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=!0,a.on("load"));a._autoplay&&a.play();f.removeEventListener("canplaythrough",l,!1)};f.addEventListener("canplaythrough",l,!1);
f.load()}return a}}a.on("loaderror")},urls:function(a){return a?(this.stop(),this._urls="string"===typeof a?[a]:a,this._loaded=!1,this.load(),this):this._urls},play:function(a,b){var c=this;"function"===typeof a&&(b=a);a&&"function"!==typeof a||(a="_default");if(!c._loaded)return c.on("load",function(){c.play(a,b)}),c;if(!c._sprite[a])return"function"===typeof b&&b(),c;c._inactiveNode(function(h){h._sprite=a;var f=0<h._pos?h._pos:c._sprite[a][0]/1E3,g=0;c._webAudio?(g=c._sprite[a][1]/1E3-h._pos,0<
h._pos&&(f=c._sprite[a][0]/1E3+f)):g=c._sprite[a][1]/1E3-(f-c._sprite[a][0]/1E3);var k=!(!c._loop&&!c._sprite[a][2]),l="string"===typeof b?b:Math.round(Date.now()*Math.random())+"",n;(function(){n=setTimeout(function(){!c._webAudio&&k&&c.stop(l).play(a,l);c._webAudio&&!k&&(c._nodeById(l).paused=!0,c._nodeById(l)._pos=0,c._clearEndTimer(l));c._webAudio||k||c.stop(l);c.on("end",l)},1E3*g);c._onendTimer.push({timer:n,id:l})})();if(c._webAudio){var u=c._sprite[a][0]/1E3,v=c._sprite[a][1]/1E3;h.id=l;h.paused=
!1;J(c,[k,u,v],l);c._playStart=d.currentTime;h.gain.value=c._volume;"undefined"===typeof h.bufferSource.start?h.bufferSource.noteGrainOn(0,f,g):h.bufferSource.start(0,f,g)}else if(4===h.readyState||!h.readyState&&navigator.isCocoonJS)h.readyState=4,h.id=l,h.currentTime=f,h.muted=q._muted||h.muted,h.volume=c._volume*q.volume(),setTimeout(function(){h.play()},0);else return c._clearEndTimer(l),function(){var d=a,f=b,g=function(){c.play(d,f);h.removeEventListener("canplaythrough",g,!1)};h.addEventListener("canplaythrough",
g,!1)}(),c;c.on("play");"function"===typeof b&&b(l);return c});return c},pause:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.pause(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=b.pos(null,a),b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0;"undefined"===typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else c.pause();b.on("pause");return b},stop:function(a){var b=this;if(!b._loaded)return b.on("play",
function(){b.stop(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=0,b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0;"undefined"===typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else isNaN(c.duration)||(c.pause(),c.currentTime=0);return b},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();c&&(b._webAudio?c.gain.value=0:c.muted=!0);return b},unmute:function(a){var b=
this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1);return b},volume:function(a,b){var c=this;a=parseFloat(a);if(0<=a&&1>=a){c._volume=a;if(!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=a:d.volume=a*q.volume());return c}return c._volume},loop:function(a){return"boolean"===typeof a?(this._loop=a,this):this._loop},sprite:function(a){return"object"===
typeof a?(this._sprite=a,this):this._sprite},pos:function(a,b){var c=this;if(!c._loaded)return c.on("load",function(){c.pos(a)}),"number"===typeof a?c:c._pos||0;a=parseFloat(a);var h=b?c._nodeById(b):c._activeNode();if(h)return 0<=a?(c.pause(b),h._pos=a,c.play(h._sprite,b),c):c._webAudio?h._pos+(d.currentTime-c._playStart):h.currentTime;if(0<=a)return c;for(h=0;h<c._audioNode.length;h++)if(c._audioNode[h].paused&&4===c._audioNode[h].readyState)return c._webAudio?c._audioNode[h]._pos:c._audioNode[h].currentTime},
pos3d:function(a,b,c,d){var f=this;b="undefined"!==typeof b&&b?b:0;c="undefined"!==typeof c&&c?c:-.5;if(!f._loaded)return f.on("play",function(){f.pos3d(a,b,c,d)}),f;if(0<=a||0>a){if(f._webAudio){var g=d?f._nodeById(d):f._activeNode();g&&(f._pos3d=[a,b,c],g.panner.setPosition(a,b,c),g.panner.panningModel=f._model||"HRTF")}}else return f._pos3d;return f},fade:function(a,b,c,d,f){var g=this,k=Math.abs(a-b),l=a>b?"down":"up",k=k/.01,q=c/k;if(!g._loaded)return g.on("load",function(){g.fade(a,b,c,d,f)}),
g;g.volume(a,f);for(var n=1;n<=k;n++)(function(){var a=Math.round(1E3*(g._volume+("up"===l?.01:-.01)*n))/1E3;setTimeout(function(){g.volume(a,f);a===b&&d&&d()},q*n)})()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var f=this;return f.fade(f._volume,a,b,function(){c&&c();f.pause(d);f.on("end")},d)},_nodeById:function(a){for(var b=this._audioNode[0],c=0;c<this._audioNode.length;c++)if(this._audioNode[c].id===a){b=this._audioNode[c];break}return b},_activeNode:function(){for(var a=
null,b=0;b<this._audioNode.length;b++)if(!this._audioNode[b].paused){a=this._audioNode[b];break}this._drainPool();return a},_inactiveNode:function(a){for(var b=null,c=0;c<this._audioNode.length;c++)if(this._audioNode[c].paused&&4===this._audioNode[c].readyState){a(this._audioNode[c]);b=!0;break}this._drainPool();if(!b){var d;if(this._webAudio)d=this._setupAudioNode(),a(d);else{this.load();d=this._audioNode[this._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",g=function(){d.removeEventListener(f,
g,!1);a(d)};d.addEventListener(f,g,!1)}}},_drainPool:function(){var a=0,b;for(b=0;b<this._audioNode.length;b++)this._audioNode[b].paused&&a++;for(b=this._audioNode.length-1;0<=b&&!(5>=a);b--)this._audioNode[b].paused&&(this._webAudio&&this._audioNode[b].disconnect(0),a--,this._audioNode.splice(b,1))},_clearEndTimer:function(a){for(var b=0,c=0;c<this._onendTimer.length;c++)if(this._onendTimer[c].id===a){b=c;break}if(a=this._onendTimer[b])clearTimeout(a.timer),this._onendTimer.splice(b,1)},_setupAudioNode:function(){var a=
this._audioNode,b=this._audioNode.length;a[b]="undefined"===typeof d.createGain?d.createGainNode():d.createGain();a[b].gain.value=this._volume;a[b].paused=!0;a[b]._pos=0;a[b].readyState=4;a[b].connect(z);a[b].panner=d.createPanner();a[b].panner.panningModel=this._model||"equalpower";a[b].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);a[b].panner.connect(a[b]);return a[b]},on:function(a,b){var c=this["_on"+a];if("function"===typeof b)c.push(b);else for(var d=0;d<c.length;d++)b?c[d].call(this,
b):c[d].call(this);return this},off:function(a,b){var c=this["_on"+a],d=b?b.toString():null;if(d)for(var f=0;f<c.length;f++){if(d===c[f].toString()){c.splice(f,1);break}}else this["_on"+a]=[];return this},unload:function(){for(var d=this._audioNode,b=0;b<this._audioNode.length;b++)d[b].paused||(this.stop(d[b].id),this.on("end",d[b].id)),this._webAudio?d[b].disconnect(0):d[b].src="";for(b=0;b<this._onendTimer.length;b++)clearTimeout(this._onendTimer[b].timer);d=q._howls.indexOf(this);null!==d&&0<=
d&&q._howls.splice(d,1);delete a[this._src]}};if(f)var I=function(d,b){if(b in a)d._duration=a[b].duration,G(d);else if(/^data:[^;]+;base64,/.test(b)){for(var c=atob(b.split(",")[1]),f=new Uint8Array(c.length),g=0;g<c.length;++g)f[g]=c.charCodeAt(g);F(f.buffer,d,b)}else{var k=new XMLHttpRequest;k.open("GET",b,!0);k.responseType="arraybuffer";k.onload=function(){F(k.response,d,b)};k.onerror=function(){d._webAudio&&(d._buffer=!0,d._webAudio=!1,d._audioNode=[],delete d._gainNode,delete a[b],d.load())};
try{k.send()}catch(l){k.onerror()}}},F=function(e,b,c){d.decodeAudioData(e,function(d){d&&(a[c]=d,G(b,d))},function(a){b.on("loaderror")})},G=function(a,b){a._duration=b?b.duration:a._duration;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=!0,a.on("load"));a._autoplay&&a.play()},J=function(e,b,c){c=e._nodeById(c);c.bufferSource=d.createBufferSource();c.bufferSource.buffer=a[e._src];c.bufferSource.connect(c.panner);c.bufferSource.loop=
b[0];b[0]&&(c.bufferSource.loopStart=b[1],c.bufferSource.loopEnd=b[1]+b[2]);c.bufferSource.playbackRate.value=e._rate};"function"===typeof define&&define.amd&&define(function(){return{Howler:q,Howl:n}});"undefined"!==typeof exports&&(exports.Howler=q,exports.Howl=n);"undefined"!==typeof window&&(window.Howler=q,window.Howl=n)})();function surrogateCtor(){}function extend(a,d){surrogateCtor.prototype=a.prototype;d.prototype=new surrogateCtor;d.prototype.constructor=d};var CONNECTED="Connected.",CONNECTING="Connecting...",NO_SUPPORT="No browser support.",CLOSED="Click to connect.";function StatusBox(){}StatusBox.init=function(a){StatusBox.blockchain=$("#blockchainStatus");StatusBox.mtgox=$("#mtgoxStatus");a&&(StatusBox.blockchain.html(""),StatusBox.mtgox.html("Debug mode."));$("#blockchainCheckBox").is(":checked")?StatusBox.reconnecting("blockchain"):StatusBox.closed("blockchain");$("#mtgoxCheckBox").is(":checked")?StatusBox.reconnecting("mtgox"):StatusBox.closed("mtgox")};
StatusBox.connected=function(a){"blockchain"==a&&StatusBox.blockchain.html('Blockchain.info Transactions: <span style="color: green;">'+CONNECTED+"</span>");"mtgox"==a&&StatusBox.mtgox.html('Mt.Gox Trades: <span style="color: green;">'+CONNECTED+"</span>")};
StatusBox.reconnecting=function(a){"blockchain"==a&&StatusBox.blockchain.html('Blockchain.info Transactions: <span style="color: yellow;">'+CONNECTING+"</span>");"mtgox"==a&&StatusBox.mtgox.html('Mt.Gox Trades: <span style="color: yellow;">'+CONNECTING+"</span>")};
StatusBox.nosupport=function(a){"blockchain"==a&&StatusBox.blockchain.html('Blockchain.info Transactions: <span style="color: red;">'+NO_SUPPORT+"</span>");"mtgox"==a&&StatusBox.mtgox.html('Mt.Gox Trades: <span style="color: red;">'+NO_SUPPORT+"</span>")};StatusBox.closed=function(a){"blockchain"==a&&StatusBox.blockchain.html('Blockchain.info Transactions: <span style="color: gray;">'+CLOSED+"</span>");"mtgox"==a&&StatusBox.mtgox.html('Mt.Gox Trades: <span style="color: gray;">'+CLOSED+"</span>")};var satoshi=1E8,DELAY_CAP=1E3,lastBlockHeight=0;function TransactionSocket(){}
TransactionSocket.init=function(){TransactionSocket.connection&&TransactionSocket.connection.close();if("WebSocket"in window){var a=new ReconnectingWebSocket("wss://ws.blockchain.info/inv");TransactionSocket.connection=a;StatusBox.reconnecting("blockchain");a.onopen=function(){console.log("Blockchain.info: Connection open!");StatusBox.connected("blockchain");a.send(JSON.stringify({op:"unconfirmed_sub"}));a.send(JSON.stringify({op:"blocks_sub"}));a.send(JSON.stringify({op:"ping_tx"}))};a.onclose=function(){console.log("Blockchain.info: Connection closed");
$("#blockchainCheckBox").prop("checked")?StatusBox.reconnecting("blockchain"):StatusBox.closed("blockchain")};a.onerror=function(a){console.log("Blockchain.info: Connection Error: "+a)};a.onmessage=function(a){a=JSON.parse(a.data);if("utx"==a.op){for(var f=0,k=0;k<a.x.out.length;k++)f+=a.x.out[k].value;for(var g=f/satoshi,f=a.x.out,k=0;k<f.length;k++)if(f[k].addr==DONATION_ADDRESS){g=a.x.out[k].value/satoshi;new Transaction(g,!0);return}setTimeout(function(){new Transaction(g)},Math.random()*DELAY_CAP)}else if("block"==
a.op){var f=a.x.height,k=a.x.nTx,l=a.x.estimatedBTCSent;a=a.x.size;f>lastBlockHeight&&(lastBlockHeight=f,console.log("New Block"),new Block(f,k,l,a))}}}else console.log("No websocket support."),StatusBox.nosupport("blockchain")};TransactionSocket.close=function(){TransactionSocket.connection&&TransactionSocket.connection.close();StatusBox.closed("blockchain")};function TradeSocket(){}
TradeSocket.init=function(){TradeSocket.connection&&TradeSocket.connection.close();var a=PUBNUB.init({publish_key:"demo",subscribe_key:"sub-c-50d56e1e-2fd9-11e3-a041-02ee2ddab7fe",ssl:!0});TradeSocket.connection=a;a.close=function(){a.unsubscribe({channel:"dbf1dee9-4f2e-4a08-8cb7-748919a71b21"});a.onclose()};a.onmessage=function(a){if(a.trade){var f=a.trade.amount_int/satoshi,k=a.trade.price*a.trade.amount_int/satoshi,g=a.trade.price_currency;setTimeout(function(){new Transaction(f,!1,k,g)},Math.random()*
DELAY_CAP)}};a.onopen=function(){console.log("Mt.Gox: Connection open!");StatusBox.connected("mtgox")};a.onclose=function(){console.log("Mt.Gox: Connection closed");$("#mtgoxCheckBox").prop("checked")?StatusBox.reconnecting("mtgox"):StatusBox.closed("mtgox")};a.subscribe({channel:"dbf1dee9-4f2e-4a08-8cb7-748919a71b21",message:a.onmessage,connect:a.onopen,disconnect:a.onclose,reconnect:a.onopen})};TradeSocket.close=function(){TradeSocket.connection&&TradeSocket.connection.close();StatusBox.closed("mtgox")};var rateboxTimeout,currentExchange,ratebox_ms=3E3;rateboxGetRate=function(){if("bitstamp"==currentExchange)$.getJSON('//query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D"https://www.bitstamp.net/api/ticker/"&format=json&callback=?',function(a){(a=$.parseJSON(a.query.results.body.p))?$("#rate").html(parseFloat(a.last).toFixed(2)):rateboxTimeout=setTimeout(rateboxGetRate,ratebox_ms)});else throw"Unrecognized Exchange";};
$(document).ready(function(){(new Pusher("de504dc5763aeef9ff52")).subscribe("live_trades").bind("trade",function(a){$("#rate").html(parseFloat(a.price).toFixed(2));rateboxTimeout&&clearTimeout(rateboxTimeout)})});switchExchange=function(a){clearTimeout(rateboxTimeout);currentExchange=a;$("#rate").html("---");"bitstamp"==a?($("#bitstampRate").css("color","white"),$("#mtgoxRate").css("color","gray")):"mtgox"==a&&($("#mtgoxRate").css("color","white"),$("#bitstampRate").css("color","gray"));rateboxGetRate()};var globalVolume=50,globalScalePitch,globalBank;Howler.volume(.01*globalVolume);function Sound(){}var soundBank=[["celesta",22],["planet",33],["wikki",13]];function zeroPad(a,d){var f=d-a.toString().length+1;return Array(+(0<f&&f)).join("0")+a}Sound.loadup=function(){sound0=[];sound1=[];sound2=[];swells0=[];swells1=[];swells2=[]};
Sound.init=function(){$("#volumeControl").click(function(){globalMute?(globalMute=!1,Howler.unmute(),$("#volumeControl").css("background-position","0 -46px")):(globalMute=!0,Howler.mute(),$("#volumeControl").css("background-position","0 0"))});$("#volumeSlider").noUiSlider({range:{min:0,max:100},start:50,handles:1,step:1,orientation:"vertical"}).on("slide",function(){globalVolume=100-$(this).val();Howler.volume(.01*globalVolume)});globalScalePitch=$("#scalePitchCheckBox").attr("checked");Sound.change(0)};
Sound.change=function(a){if(0===a){if(0===sound0.length)for(a=1;22>=a;a++)istring=zeroPad(a,3),newSound=new Howl({urls:["sounds/celesta/celesta"+istring+".ogg","sounds/celesta/celesta"+istring+".mp3"],autoplay:!1}),sound0.push(newSound);if(0===swells0.length)for(a=1;3>=a;a++)newSound=new Howl({urls:["sounds/swells0/swell"+a+".ogg","sounds/swells0/swell"+a+".mp3"],autoplay:!1}),swells0.push(newSound);currentSound=sound0;currentSwells=swells0;$("#musicianDonation").text("")}else if(1===a){if(0===sound1.length)for(a=
1;33>=a;a++)istring=zeroPad(a,3),newSound=new Howl({urls:["sounds/planet/planet"+istring+".ogg","sounds/planet/planet"+istring+".mp3"],autoplay:!1}),sound1.push(newSound);if(0===swells1.length)for(a=1;3>=a;a++)newSound=new Howl({urls:["sounds/swells1/planetswell"+a+".ogg","sounds/swells1/planetswell"+a+".mp3"],autoplay:!1}),swells1.push(newSound);currentSound=sound1;currentSwells=swells1;SOUND_DONATION_ADDRESS="144b31mmaWQVDQFiUPo6HEzxc2Dm83WXrW";$("#musicianDonation").html("Donate to instrument creator: <span>"+
SOUND_DONATION_ADDRESS+"</span>")}else if(2===a){if(0===sound2.length)for(a=1;13>=a;a++)istring=zeroPad(a,3),newSound=new Howl({urls:["sounds/wikki/wikki"+istring+".ogg","sounds/wikki/wikki"+istring+".mp3"],autoplay:!1}),sound2.push(newSound);if(0===swells2.length)for(a=1;3>=a;a++)newSound=new Howl({urls:["sounds/swells2/wikkiswell"+a+".ogg","sounds/swells2/wikkiswell"+a+".mp3"],autoplay:!1}),swells2.push(newSound);currentSound=sound2;currentSwells=swells2;SOUND_DONATION_ADDRESS="1JFaYRGkDmhpSTbFKwqDWKr2ncvvrgYEAV";
$("#musicianDonation").html("Donate to instrument creator: <span>"+SOUND_DONATION_ADDRESS+"</span>")}};var currentNotes=0,noteTimeout=500;Sound.playRandomAtVolume=function(a){if(!globalMute){var d=Math.floor(100*Math.random());Sound.playPitchAtVolume(a,d)}};
Sound.playPitchAtVolume=function(a,d){if(!globalMute){var f=Math.floor(d/100*currentSound.length),k=Math.floor(4*Math.random())-2,f=Math.min(currentSound.length-1,f+k),f=Math.max(0,f);5>currentNotes&&(currentSound[f].volume(a),currentSound[f].play(),currentNotes++,setTimeout(function(){currentNotes--},noteTimeout))}};var lastBlockSound=-1;Sound.playRandomSwell=function(){if(!globalMute){var a;do a=Math.floor(Math.random()*currentSwells.length);while(a==lastBlockSound);lastBlockSound=a;currentSwells[a].play()}};function Floatable(){this.velocity={x:0,y:-1};this.pageDiv=document.getElementById("bubbleDiv");this.updateContainerSize();this.div=document.createElement("div");this.div.className="floatableDiv";this.pageDiv.appendChild(this.div);this.innerDiv=document.createElement("div");this.div.appendChild(this.innerDiv);this.innerDiv.className="innerDiv";updateTargets.push(this)}Floatable.prototype.updateContainerSize=function(){this.pageDivWidth=$(this.pageDiv).width();this.pageDivHeight=$(this.pageDiv).height()};
Floatable.prototype.update=function(a){a/=50;this.x+=this.velocity.x*a;this.y+=this.velocity.y*a;this.velocity.x+=(.1*Math.random()-.05)*a;1<this.velocity.x?this.velocity.x=1:-1>this.velocity.x&&(this.velocity.x=-1);0>this.x?this.velocity.x+=.005*a:this.x>this.pageDivWidth-this.width&&(this.velocity.x-=.005*a);this.updateDiv();this.y<-this.height&&this.removeSelf()};
Floatable.prototype.updateDiv=function(){this.div.style["-webkit-transform"]="translate("+this.x+"px,"+this.y+"px)";this.div.style.transform="translate("+this.x+"px,"+this.y+"px)"};Floatable.prototype.removeSelf=function(){this.pageDiv.removeChild(this.div);updateTargets.splice(updateTargets.indexOf(this),1)};
Floatable.prototype.addImage=function(a,d,f){this.canvas=document.createElement("canvas");this.image=a;this.canvas.height=f;this.canvas.width=d;this.canvas.style.position="absolute";this.canvas.style.top="0px";this.canvas.style.left="0px";this.canvas.getContext("2d").drawImage(this.image,0,0,d-1,f-1);this.div.appendChild(this.canvas)};Floatable.prototype.addText=function(a){this.innerDiv.innerHTML+=a};
Floatable.prototype.initPosition=function(){this.x=Math.random()*(this.pageDivWidth-this.width);this.y=this.pageDivHeight;this.updateDiv();this.div.style.width=this.width+"px";this.div.style.height=this.height+"px";this.innerDiv.style.top=this.height/2-this.innerDiv.offsetHeight/2+"px"};
var easterSuccess=function(){var a=new Floatable;a.width=53;a.height=48;a.image=document.createElement("img");a.image.src="images/easteregg.gif";a.image.height=a.height;a.image.width=a.width;a.image.style.position="absolute";a.image.style.top="0px";a.image.style.left="0px";a.div.appendChild(a.image);a.initPosition();a.update=function(d){Floatable.prototype.update.call(a,d);a.velocity.x+=.3*Math.random()-.15;.1<a.velocity.x&&$(a.div).css({"-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)",
transform:"scaleX(-1)"});-.1>a.velocity.x&&$(a.div).css({"-moz-transform":"scaleX(1)","-o-transform":"scaleX(1)","-webkit-transform":"scaleX(1)",transform:"scaleX(1)"})}};new Konami(easterSuccess);function Block(a,d,f,k){"visible"===document.visibilityState&&(Floatable.call(this),f=Math.floor(f/satoshi)+" BTC",k=Math.floor(k/1024)+" KB",this.width=this.height=500,this.addImage(blockImage,this.width,this.height),this.addText("Block #"+a+"<br />Number of Transactions: "+d+"<br />Transaction Volume: "+f+"<br />Block Size: "+k),this.initPosition());Sound.playRandomSwell()}extend(Floatable,Block);function Transaction(a,d,f,k){if("visible"===document.visibilityState){Floatable.call(this);this.area=100*a+3E3;this.width=this.height=2*Math.sqrt(this.area/Math.PI);this.addImage(bubbleImage,this.width,this.height);var g="&#3647;"+a.toFixed(2);"&#3647;0.00"==g&&(g="<&#3647;0.01");d?this.addText('<span style="color: yellow;">'+g+'</span><br /><span style="color: cyan;">Donation</span><br /><span style="color: lime;">Thanks!</span>'):this.addText(g);f&&k&&this.addText("<br />"+f.toFixed(2)+" "+k);
this.initPosition()}d=a/(1E3/(.7-.3))+.3;.7<d&&(d=.7);a=Math.min(100,Math.log(a+1.0715307808111487)/Math.log(1.0715307808111487));globalScalePitch?Sound.playPitchAtVolume(d,100-a):Sound.playRandomAtVolume(d)}extend(Floatable,Transaction);var DEBUG_MODE=!1,DONATION_ADDRESS,SOUND_DONATION_ADDRESS,globalMute=!1,instanceId=0,pageDivId="pageDiv",last_update=0,updateTargets=[],bubbleImage=new Image;bubbleImage.src="images/bubble.png";var blockImage=new Image;blockImage.src="images/block.png";var debugSpawner,updateLayoutWidth=function(){$(".chartMask").css("visibility","visible")},updateLayoutHeight=function(){var a=window.innerHeight;"none"!=$("#header").css("display")&&(a-=$("#header").outerHeight());$("#pageSplitter").height(a)};
$(document).ready(function(){prevChartWidth=$("#pageSplitter").width()/2;$("#chartCell").hide();DONATION_ADDRESS=$("#donationAddress").html();$("#noJavascript").css("display","none");updateLayoutHeight();StatusBox.init(DEBUG_MODE);$(".clickSuppress").click(function(){$(".clickSuppress").parent().slideUp(300)});debugSpawner=function(){if(.1>=Math.random()){var a;a=Math.random();a=.6>a?Math.random():.8>a?10*Math.random():.95>a?100*Math.random():1E3*Math.random();.5>Math.random()?new Transaction(a,!1):
new Transaction(a,!1,75*a,"USD")}};switchExchange("bitstamp");$("#donationAddress").qr()});
var toggleInterface=function(){0===$(".interface:hidden").length?($(".interface").fadeOut(500,updateLayoutHeight),$("#hideInterface").html("[ Show Interface ]"),$("#hideInterface").css("opacity","0.5")):($(".interface").fadeIn(500),$("#hideInterface").html("[ Hide Interface ]"),$("#hideInterface").css("opacity","1"),updateLayoutHeight())},globalUpdate=function(a){window.requestAnimationFrame(globalUpdate);var d=a-last_update;last_update=a;for(a=0;a<updateTargets.length;a++)updateTargets[a].update(d)};
$(window).bind("load",function(){DEBUG_MODE?setInterval(debugSpawner,100):($("#blockchainCheckBox").prop("checked")&&TransactionSocket.init(),$("#mtgoxCheckBox").prop("checked")&&TradeSocket.init());window.requestAnimationFrame(globalUpdate);Sound.loadup();Sound.init()});
var endResize=function(){$(".chartMask").css("visibility","hidden");for(var a=0;a<updateTargets.length;a++)updateTargets[a].updateContainerSize()},hideChart=function(){$("#chartElement").hide();$("#showChart").show();prevChartWidth=$("#chartCell").width();$("#chartCell").width(0);$("#chartCell").hide();$("#pageSplitter").colResizable({disable:!0})},showChart=function(){$("#chartElement").show();$("#showChart").hide();$("#chartCell").width(prevChartWidth);$("#chartCell").show();$(window).trigger("resize");
0===$("#bitcoinChart").length&&$("#chartHolder").html('<iframe id="bitcoinChart" scrolling="no" frameBorder="0" src="http://bitcoin.clarkmoody.com/widget/chart/zeroblock/"></iframe>');$("#pageSplitter").colResizable({liveDrag:!0,onDrag:updateLayoutWidth,onResize:endResize})};$(window).resize(function(){updateLayoutHeight()});window.onbeforeunload=function(a){clearInterval(globalUpdate);TransactionSocket.close();TradeSocket.close()};
